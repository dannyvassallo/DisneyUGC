language: ruby
rvm:
  - 2.0.0
env:
  - DB=sqlite
  - DB=mysql
  - DB=postgresql
script:
  - RAILS_ENV=test bundle exec rake --trace db:migrate test
  - bundle exec rspec spec
before_script:
  - mysql -e 'create database disneyugc_test'
  - psql -c 'create database disneyugc_test' -U postgres
env:
  AWS_ACCESS_KEY_ID: areallylongstring
  AWS_SECRET_ACCESS_KEY: areallylongstring
  development:
    AWS_BUCKET: blip
    SENDGRID_USERNAME: nope
    SENDGRID_PASSWORD: snore
    MAIL_HOST: https://test.com
    EMAIL_URL: test.com
  test:
    AWS_BUCKET: blip
    SENDGRID_USERNAME: nope
    SENDGRID_PASSWORD: snore
    MAIL_HOST: https://test.com
    EMAIL_URL: test.com
  staging:
    AWS_BUCKET: blip
    SENDGRID_USERNAME: nope
    SENDGRID_PASSWORD: snore
    MAIL_HOST: https://test.com
    EMAIL_URL: test.com
  production:
    AWS_BUCKET: blip
    SENDGRID_USERNAME: nope
    SENDGRID_PASSWORD: snore
    MAIL_HOST: https://test.com
    EMAIL_URL: test.com
